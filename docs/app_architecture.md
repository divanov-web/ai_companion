# Архитектура приложения

Цель: маленькое приложение с ясными слоями и минимумом абстракций.

## Оглавление
- [Общая архитектура](./architecture_overall.md)
- [Слой Service](../internal/service/readme.md)
- [Слой Adapter](../internal/adapter/readme.md)
- [Слой сценариев(приложений) App](../internal/app/readme.md)

## Термины
- Сообщение — один запрос/ответ в Responses API.
- Диалог — цепочка сообщений с общим контекстом, связанная `conversation`.

## Слои
1. `cmd/companion` — сборка зависимостей и запуск сценария.
2. `internal/service` — оркестрация сценариев: создать/продолжить диалог, отправить текст, отправить текст+картинку.
3. `internal/adapter` — адаптер OpenAI: формирует параметры SDK и вызывает OpenAI API.

## Правила проектирования
- Зависимости собирать вручную на верхнем уровне.
- Интерфейсы вводить когда больше 1 реализации какой-нибудь сущности.

## Правила OpenAI
- Используем Responses API; Chat Completions считать устаревшим.
- Диалог создаётся через `Conversations` и далее продолжается передачей `conversation.ID` в запросы.

## Правила оформления кода
- Писать очень короткие комментарии к каждому методу и импортируемой структуре.

## Следующие шаги
- Ввести пакет домена (если появится собственная логика/правила).
- Добавить конфигурацию через env и логирование.
